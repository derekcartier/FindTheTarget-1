{"version":3,"sources":["decompose.js","possibleResults.js","hiddenNumber.js","index.js"],"names":["concat","element","array","length","map","e","decompose","number","substr","possibleResults","decomposition","results","indexesUsedForResult","operations","loop","index","val","stepsForVal","nbEqForVal","indexes","i","add","push","sub","Math","abs","recontructHost","usedIndexes","newHost","doesItStartWith","potentialStart","target","answer","newTarget","usedFirst","usedLast","ReactDOM","render","useState","host","state","setState","onChange","name","value","result","hiddenNumber","reset","decompositions","d","r","filter","usesFirst","indexOf","splice","success","steps","type","autoFocus","className","step","key","document","getElementById"],"mappings":"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","file":"static/js/main.9811db9f.chunk.js","sourcesContent":["// precondition : array has 2 dimensions\n// concat adds element in the beginning of each array component\nfunction concat(element, array) {\n  if (array.length === 0) {\n    return [[element]];\n  }\n\n  return array.map(e => [element, ...e]);\n}\n\nexport default function decompose(number) {\n  if (number.length === 0) {\n    return [];\n  }\n\n  if (number.length === 1) {\n    //  console.log(\"case 1 : \", [[number]]);\n    return [[number]];\n  }\n\n  if (number.length === 2) {\n    //console.log(\"case 2 : \", [[number[0], number[1]], [number]]);\n    return [[number[0], number[1]], [number]];\n  }\n\n  if (number.length === 3) {\n    return [\n      [number.substr(0, 1), number.substr(1, 1), number.substr(2, 1)],\n      [number.substr(0, 1), number.substr(1, 2)],\n      [number.substr(0, 2), number.substr(2, 1)],\n      [number]\n    ];\n  }\n\n  return [\n    ...concat(number.substr(0, 1), decompose(number.substr(1))),\n    ...concat(number.substr(0, 2), decompose(number.substr(2))),\n    ...concat(number.substr(0, 3), decompose(number.substr(3))),\n    ...concat(number.substr(0, 4), decompose(number.substr(4)))\n  ];\n}\n","export default function possibleResults(decomposition) {\n  const results = [];\n  const indexesUsedForResult = [];\n  const operations = [];\n\n  function loop(\n    decomposition,\n    index,\n    val,\n    stepsForVal,\n    nbEqForVal,\n    indexes = []\n  ) {\n    if (nbEqForVal < 3) {\n      for (let i = index + 1; i < decomposition.length; i++) {\n        const add = val + 1 * decomposition[i];\n        results.push(`${add}`);\n        indexesUsedForResult.push([...indexes, index, i]);\n        operations.push(\n          `${stepsForVal} (${val} + ${decomposition[i]} = ${add})`\n        );\n        loop(\n          decomposition,\n          i,\n          val + 1 * decomposition[i],\n          `${stepsForVal} (${val} + ${decomposition[i]} = ${add})`,\n          nbEqForVal + 1,\n          [...indexes, index]\n        );\n\n        const sub = Math.abs(val - 1 * decomposition[i]);\n        results.push(`${sub}`);\n        indexesUsedForResult.push([...indexes, index, i]);\n        operations.push(\n          `${stepsForVal} (${val} - ${decomposition[i]} = ${sub})`\n        );\n        loop(\n          decomposition,\n          i,\n          Math.abs(val - 1 * decomposition[i]),\n          `${stepsForVal} (${val} - ${decomposition[i]} = ${sub})`,\n          nbEqForVal + 1,\n          [...indexes, index]\n        );\n      }\n    }\n  }\n\n  loop(decomposition, 0, 1 * decomposition[0], \"\", 0);\n\n  return { results, indexesUsedForResult, operations };\n}\n","import decompose from \"./decompose\";\nimport possibleResults from \"./possibleResults\";\n\n// starts from a decomposition of a host and used indexes from the previous step\n// and recontructs the new host to work with\nfunction recontructHost(decomposition, usedIndexes) {\n  let newHost = \"\";\n  for (let i of usedIndexes) {\n    newHost += decomposition[i];\n  }\n  for (\n    let i = usedIndexes[usedIndexes.length - 1] + 1;\n    i < decomposition.length;\n    i++\n  ) {\n    newHost += decomposition[i];\n  }\n  return newHost;\n}\n\n// doesItStartWith verifies if target starts with potentialStart\n// In which case, answer is true and newTarget is the remaining part of target\n// Otherwise, answer is false and newTarget is empty\nexport function doesItStartWith(potentialStart, target) {\n  let answer = target.substr(0, potentialStart.length) === potentialStart;\n  let newTarget = \"\";\n  if (answer) {\n    newTarget = target.substr(potentialStart.length);\n  }\n  return { answer, newTarget };\n}\n\nlet usedFirst = false;\nlet usedLast = false;\n\nexport default function hiddenNumber(target, host, reset = false) {\n  if (reset) {\n    usedFirst = false;\n    usedLast = false;\n  }\n\n  let decompositions = decompose(host);\n\n  for (let d of decompositions) {\n    let { results, indexesUsedForResult, operations } = possibleResults(d);\n    if (!usedFirst) {\n      indexesUsedForResult.filter((indexes, i) => {\n        const usesFirst = indexes.indexOf(0) >= 0;\n        if (!usesFirst) {\n          results.splice(i);\n        }\n        return usesFirst;\n      });\n    }\n    usedFirst = true;\n\n    for (let r in results) {\n      let { answer, newTarget } = doesItStartWith(results[r], target);\n      if (answer) {\n        if (!usedLast) {\n          usedLast =\n            indexesUsedForResult[r][indexesUsedForResult[r].length - 1] ===\n            d.length - 1;\n        }\n        // console.log({\n        //   host,\n        //   step: operations[r],\n        //   potentialStart: results[r],\n        //   target,\n        //   newTarget,\n        //   indexes: indexesUsedForResult[r]\n        // });\n        if (newTarget === \"\" && usedLast) {\n          return { success: true, steps: [operations[r]] };\n        }\n        let newHost = recontructHost(d, indexesUsedForResult[r]);\n        let { success, steps } = hiddenNumber(newTarget, newHost);\n        if (success) {\n          return { success, steps: [operations[r], ...steps] };\n        }\n      }\n    }\n  }\n\n  return { success: false, steps: [] };\n}\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\n\nimport hiddenNumber from \"./hiddenNumber\";\n\nfunction App() {\n  const [state, setState] = useState({ target: \"\", host: \"\" });\n\n  const onChange = ({ target: { name, value } }) => {\n    setState({ ...state, [name]: value });\n  };\n\n  const result =\n    state.target && state.host && hiddenNumber(state.target, state.host, true);\n  return (\n    <div>\n      <h1>Find the target</h1>\n      <div>\n        <label>\n          <span>Target:</span>\n          <input\n            type=\"number\"\n            name=\"target\"\n            value={state.target}\n            onChange={onChange}\n            autoFocus={true}\n          />\n        </label>\n        <label>\n          <span>Host:</span>\n          <input\n            type=\"number\"\n            name=\"host\"\n            value={state.host}\n            onChange={onChange}\n          />\n        </label>\n        {result && (\n          <div className={`result ${result.success && \"SUCCESS\"}`}>\n            <span>{result.success ? \"SUCCESS\" : \"FAIL\"}</span>\n            {result.success && (\n              <ol>\n                {result.steps.map((step, index) => (\n                  <li key={index}>\n                    <pre>{step}</pre>\n                  </li>\n                ))}\n              </ol>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n//\n// console.clear();\n//\n// const tests = [\n//   // [\"2131\", \"39422\"],\n//   // [\"419\", \"10540\"],\n//   // [\"441\", \"10540\"],\n//   // [\"441\", \"10934\"],\n//   // [\"518\", \"10934\"],\n//   // [\"325\", \"6811\"],\n//   // [\"333\", \"10061\"],\n//   // [\"596\", \"5433\"],\n//   // [\"517\", \"11034\"],\n//   // [\"5\", \"12\"],\n//   // [\"52\", \"12\"],\n//   [\"10\", \"100\"],\n//   [\"100\", \"10\"]\n//   // [\"12\", \"5\"]\n// ];\n//\n// tests.forEach(([target, host]) => {\n//   let result = hiddenNumber(target, host);\n//   console.log({ host, target, result });\n// });\n"],"sourceRoot":""}